(this["webpackJsonpmy-react-app"]=this["webpackJsonpmy-react-app"]||[]).push([[0],{368:function(e,t,a){e.exports=a(837)},375:function(e,t,a){},837:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(16),s=a.n(i),c=a(38),u=a.n(c),l=a(365),o=a(103),d=a(339),h=a(340),m=a(366),p=a(363),f=a(839),g=a(129),v=a(80),y=a(842),b=a(841),k=a(840),E=(a(374),a(375),a(104)),w=a.n(E),x=a(341),L=a.n(x),C=f.a.Content,O=g.a.Option,j=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={field:{userName:"",env:"",branch:"",column:"",order:""},page:{total:0,pageSize:10,current:1},dataList:[],userList:[],envList:[],branchList:[]},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.getUserList(),this.getEnvList(),this.getBranchList(),this.getData()}},{key:"getData",value:function(){var e=Object(o.a)(u.a.mark((function e(t){var a,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.post("/packinfo/getAllByParam",Object(l.a)({},this.state.field,{current:t||this.state.page.current,pageSize:this.state.page.pageSize}));case 2:a=e.sent,n=a.data,r=Object.assign(this.state.page,{total:n.data.total}),this.setState({dataList:n.data.list,page:r}),this.renderEcharts(n.data.list);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUserList",value:function(){var e=Object(o.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("/packinfo/getList",{params:{name:"userName"}});case 2:t=e.sent,a=t.data,this.setState({userList:a.data});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getEnvList",value:function(){var e=Object(o.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("/packinfo/getList",{params:{name:"env"}});case 2:t=e.sent,a=t.data,this.setState({envList:a.data});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getBranchList",value:function(){var e=Object(o.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("/packinfo/getList",{params:{name:"branch"}});case 2:t=e.sent,a=t.data,this.setState({branchList:a.data});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleChangeUser",value:function(e){var t="";e&&(t=e);var a=Object.assign(this.state.field,{userName:t});this.setState({field:a})}},{key:"handleChangeEnv",value:function(e){var t="";e&&(t=e);var a=Object.assign(this.state.field,{env:t});this.setState({field:a})}},{key:"handleChangeBranch",value:function(e){var t="";e&&(t=e);var a=Object.assign(this.state.field,{branch:t});this.setState({field:a})}},{key:"deleteItem",value:function(){var e=Object(o.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.post("/packinfo/deleteItem",{id:t.id});case 2:this.getData();case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleTableChange",value:function(e,t,a){var n=this,r=Object.assign(this.state.field,{column:a.columnKey,order:"ascend"===a.order?"asc":"descend"===a.order?"desc":""});this.setState({page:e,field:r},(function(){return n.getData()}))}},{key:"renderEcharts",value:function(e){e=e.sort((function(e,t){return e.createTime-t.createTime})),L.a.init(document.getElementById("main")).setOption({tooltip:{trigger:"axis"},legend:{data:["\u6784\u5efa\u4f53\u79ef","\u6784\u5efa\u8017\u65f6"]},xAxis:{type:"category",data:e.map((function(e){return new Date(e.createTime).toLocaleString()}))},yAxis:{type:"value"},series:[{name:"\u6784\u5efa\u4f53\u79ef",data:e.map((function(e){return(e.size/1024/1024).toFixed(2)})),type:"line",smooth:!0},{name:"\u6784\u5efa\u8017\u65f6",data:e.map((function(e){return e.buildTime})),type:"line",smooth:!0}]})}},{key:"render",value:function(){var e=this,t=this.state,a=t.dataList,n=t.userList,i=t.envList,s=t.branchList,c=t.page,u=[{title:"\u6700\u540e\u63d0\u4ea4",dataIndex:"userName",key:"userName"},{title:"\u6784\u5efa\u73af\u5883",dataIndex:"env",key:"env"},{title:"\u5206\u652f",dataIndex:"branch",key:"branch"},{title:"\u6784\u5efa\u4f53\u79ef",dataIndex:"size",key:"size",sorter:{compare:function(e,t){return e.size-t.size}},render:function(e,t){return r.a.createElement("span",null,(t.size/1024).toFixed(2),"Kb")}},{title:"\u6784\u5efa\u8017\u65f6",dataIndex:"buildTime",key:"buildTime",sorter:{compare:function(e,t){return e.buildTime-t.buildTime}}},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"createTime",key:"createTime",sorter:{compare:function(e,t){return e.createTime-t.createTime}},render:function(e,t){return r.a.createElement("span",null,new Date(t.createTime).toLocaleString())}},{title:"\u64cd\u4f5c",render:function(t,a){return r.a.createElement(v.a,{type:"text",danger:!0,onClick:e.deleteItem.bind(e,a)},"\u5220\u9664")}}];return r.a.createElement(f.a,null,r.a.createElement(C,null,r.a.createElement("div",{className:"appBar"},r.a.createElement(y.a,{gutter:16,className:"searchBar"},r.a.createElement(b.a,{className:"gutter-row",span:6},r.a.createElement(g.a,{placeholder:"\u8bf7\u9009\u62e9\u59d3\u540d",style:{width:"100%"},allowClear:!0,onChange:this.handleChangeUser.bind(this)},n.map((function(e,t){return r.a.createElement(O,{value:e.userName,key:t},e.userName)})))),r.a.createElement(b.a,{className:"gutter-row",span:6},r.a.createElement(g.a,{placeholder:"\u8bf7\u9009\u62e9\u6784\u5efa\u73af\u5883",style:{width:"100%"},allowClear:!0,onChange:this.handleChangeEnv.bind(this)},i.map((function(e,t){return r.a.createElement(O,{value:e.env,key:t},e.env)})))),r.a.createElement(b.a,{className:"gutter-row",span:6},r.a.createElement(g.a,{placeholder:"\u8bf7\u9009\u62e9\u5206\u652f",style:{width:"100%"},allowClear:!0,onChange:this.handleChangeBranch.bind(this)},s.map((function(e,t){return r.a.createElement(O,{value:e.branch,key:t},e.branch)})))),r.a.createElement(b.a,{className:"gutter-row",span:6},r.a.createElement(v.a,{type:"primary",onClick:this.getData.bind(this,1)},"\u67e5\u8be2"))),r.a.createElement("div",{id:"main",style:{height:400}}),r.a.createElement(k.a,{size:"small",rowKey:"id",dataSource:a,columns:u,pagination:c,onChange:this.handleTableChange.bind(this)}))))}}]),a}(n.Component);s.a.render(r.a.createElement(j,null),document.getElementById("root"))}},[[368,1,2]]]);
//# sourceMappingURL=main.9fd1ce95.chunk.js.map